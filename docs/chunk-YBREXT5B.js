import{a as B,b as T,c as O,d as D,e as W,g as j,h as H,l as R,m as P}from"./chunk-YPKE7PS4.js";import{$ as v,$a as S,Da as A,Ha as h,Oa as l,Qa as i,Ra as n,Sa as c,Ta as w,Ua as x,Va as f,Xa as _,Y as u,Ya as C,Z as p,Za as k,_ as g,_a as m,a as I,ab as y,b as M,ua as a,ub as N,vb as F,wb as V,ya as E}from"./chunk-OVXWXYHI.js";var z=["chatContainer"],G=["messageTextarea"];function Q(t,d){if(t&1){let e=w();i(0,"button",35),x("click",function(){let r=u(e).$implicit,s=f(2);return p(s.sendQuickMessage(r))}),m(1),n()}if(t&2){let e=d.$implicit;a(),y(" ",e," ")}}function q(t,d){if(t&1&&(i(0,"div",27)(1,"div",28),g(),i(2,"svg",29),c(3,"path",30),n()(),v(),i(4,"h2",31),m(5,"Welcome to Nutrition AI"),n(),i(6,"p",32),m(7," Ask me anything about nutrition, meal planning, or dietary advice. I'm here to help you on your health journey! "),n(),i(8,"div",33),h(9,Q,2,1,"button",34),n()()),t&2){let e=f();a(9),l("ngForOf",e.quickSuggestions)}}function L(t,d){if(t&1&&(i(0,"div",39)(1,"div",40)(2,"div",41)(3,"p",42),m(4),n()(),i(5,"p",43),m(6),n()(),i(7,"div",44),g(),i(8,"svg",45),c(9,"path",46),n()()()),t&2){let e=f().$implicit,o=f();a(4),S(e.content),a(2),y(" ",o.formatTime(e.timestamp)," ")}}function $(t,d){t&1&&(i(0,"div",54),c(1,"div",55)(2,"div",56)(3,"div",57),n())}function K(t,d){if(t&1&&(i(0,"p",42),m(1),n()),t&2){let e=f(2).$implicit;a(),S(e.content)}}function J(t,d){if(t&1&&(i(0,"p",58),m(1),n()),t&2){let e=f(2).$implicit,o=f();a(),y(" ",o.formatTime(e.timestamp)," ")}}function Y(t,d){if(t&1&&(i(0,"div",47)(1,"div",48),g(),i(2,"svg",49),c(3,"path",9),n()(),v(),i(4,"div",40)(5,"div",50),h(6,$,4,0,"div",51)(7,K,2,1,"p",52),n(),h(8,J,2,1,"p",53),n()()),t&2){let e=f().$implicit;a(6),l("ngIf",e.typing),a(),l("ngIf",!e.typing),a(),l("ngIf",!e.typing)}}function X(t,d){if(t&1&&(i(0,"div",36),h(1,L,10,2,"div",37)(2,Y,9,3,"div",38),n()),t&2){let e=d.$implicit;a(),l("ngIf",e.isUser),a(),l("ngIf",!e.isUser)}}function Z(t,d){t&1&&(g(),i(0,"svg",59),c(1,"path",60),n())}function ee(t,d){t&1&&c(0,"div",61)}var ae=(()=>{class t{constructor(e){this.fb=e,this.messages=[],this.isTyping=!1,this.shouldScrollToBottom=!1,this.quickSuggestions=["What's a healthy breakfast?","How much protein do I need?","Best foods for energy","Meal prep ideas","Healthy snacks"],this.aiResponses=["That's a great question about nutrition! Here are some key points to consider...","Based on current nutritional guidelines, I'd recommend...","For optimal health, it's important to focus on...","Here's what nutritionists typically suggest...","That's an excellent approach to healthy eating! Let me share some insights...","Nutrition is very individual, but generally speaking...","I'd be happy to help you with that! Here's what you should know...","Great question! The key factors to consider are...","From a nutritional standpoint, here's what I recommend...","That's a common concern, and here's how to address it..."],this.messageForm=this.fb.group({message:["",[T.required,T.maxLength(500)]]})}ngOnInit(){this.loadChatHistory(),setTimeout(()=>{this.messageTextarea&&this.messageTextarea.nativeElement.addEventListener("input",this.autoResizeTextarea.bind(this))})}ngAfterViewChecked(){this.shouldScrollToBottom&&(this.scrollToBottom(),this.shouldScrollToBottom=!1)}autoResizeTextarea(){let e=this.messageTextarea.nativeElement;e.style.height="auto",e.style.height=Math.min(e.scrollHeight,128)+"px"}trackByMessageId(e,o){return o.id}sendMessage(){if(this.messageForm.invalid||this.isTyping)return;let e=this.messageForm.get("message")?.value.trim();if(!e)return;let o={id:this.generateId(),content:e,isUser:!0,timestamp:new Date};this.messages.push(o),this.messageForm.reset(),this.shouldScrollToBottom=!0,this.messageTextarea&&(this.messageTextarea.nativeElement.style.height="auto"),this.simulateAIResponse(),this.saveChatHistory()}sendQuickMessage(e){this.messageForm.patchValue({message:e}),this.sendMessage()}simulateAIResponse(){this.isTyping=!0;let e={id:this.generateId(),content:"",isUser:!1,timestamp:new Date,typing:!0};this.messages.push(e),this.shouldScrollToBottom=!0;let o=Math.random()*2e3+1e3;setTimeout(()=>{this.messages=this.messages.filter(s=>!s.typing);let r={id:this.generateId(),content:this.getRandomAIResponse(),isUser:!1,timestamp:new Date};this.messages.push(r),this.isTyping=!1,this.shouldScrollToBottom=!0,this.saveChatHistory()},o)}getRandomAIResponse(){let e=this.aiResponses[Math.floor(Math.random()*this.aiResponses.length)],o=[`

\u2022 Focus on whole, unprocessed foods
\u2022 Stay hydrated throughout the day
\u2022 Listen to your body's hunger cues`,`

Remember, consistency is key when it comes to healthy eating habits!`,`

Would you like me to elaborate on any specific aspect?`,`

Feel free to ask if you need more personalized recommendations!`,`

\u{1F4A1} Pro tip: Small, sustainable changes often lead to the best long-term results.`];return e+(Math.random()>.5?o[Math.floor(Math.random()*o.length)]:"")}onKeyDown(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),this.sendMessage())}toggleEmojiPicker(){console.log("Emoji picker would open here")}clearChat(){confirm("Are you sure you want to clear the chat history?")&&(this.messages=[],localStorage.removeItem("nutrition-ai-chat-history"))}formatTime(e){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(e)}scrollToBottom(){try{let e=this.chatContainer.nativeElement;e.scrollTop=e.scrollHeight}catch(e){console.error("Error scrolling to bottom:",e)}}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}saveChatHistory(){try{let e={messages:this.messages.filter(o=>!o.typing),lastUpdated:new Date().toISOString()};localStorage.setItem("nutrition-ai-chat-history",JSON.stringify(e))}catch(e){console.error("Error saving chat history:",e)}}loadChatHistory(){try{let e=localStorage.getItem("nutrition-ai-chat-history");if(e){let o=JSON.parse(e);this.messages=o.messages.map(r=>M(I({},r),{timestamp:new Date(r.timestamp)})),this.shouldScrollToBottom=!0}}catch(e){console.error("Error loading chat history:",e),this.messages=[]}}static{this.\u0275fac=function(o){return new(o||t)(E(R))}}static{this.\u0275cmp=A({type:t,selectors:[["app-chat-with-nutrition-ai"]],viewQuery:function(o,r){if(o&1&&(_(z,5),_(G,5)),o&2){let s;C(s=k())&&(r.chatContainer=s.first),C(s=k())&&(r.messageTextarea=s.first)}},decls:35,vars:8,consts:[["chatContainer",""],["messageTextarea",""],[1,"flex","flex-col","h-screen","bg-[#0d1b2aff]"],[1,"bg-[#1b263bff]","border-b","border-[#415a77ff]","p-4","shadow-lg"],[1,"container","mx-auto","max-w-4xl"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-3"],[1,"w-10","h-10","bg-[#415a77ff]","rounded-full","flex","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-[#e0e1ddff]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],[1,"text-xl","font-semibold","text-[#e0e1ddff]"],[1,"text-sm","text-[#778da9ff]"],[1,"inline-block","w-2","h-2","bg-green-400","rounded-full","mr-2"],[1,"btn","btn-outline","text-sm","px-4","py-2","hover:bg-[#415a77ff]","transition-colors",3,"click"],[1,"flex-1","overflow-hidden"],[1,"h-full","overflow-y-auto","p-4","space-y-4","custom-scrollbar"],["class","text-center py-12",4,"ngIf"],["class","message-container",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-[#1b263bff]","border-t","border-[#415a77ff]","p-4"],[1,"flex","space-x-3",3,"ngSubmit","formGroup"],[1,"flex-1","relative"],["formControlName","message","placeholder","Ask me about nutrition, meal planning, or dietary advice...","rows","1",1,"w-full","bg-[#0d1b2aff]","border","border-[#415a77ff]","rounded-2xl","px-4","py-3","pr-12","text-[#e0e1ddff]","placeholder-[#778da9ff]","focus:outline-none","focus:ring-2","focus:ring-[#778da9ff]","focus:border-transparent","resize-none","max-h-32",3,"keydown"],["type","button",1,"absolute","right-3","top-1/2","transform","-translate-y-1/2","text-[#778da9ff]","hover:text-[#e0e1ddff]","transition-colors",3,"click"],["type","submit",1,"bg-[#415a77ff]","hover:bg-[#778da9ff]","disabled:bg-[#415a77ff]/50","text-[#e0e1ddff]","rounded-2xl","px-6","py-3","transition-colors","flex","items-center","justify-center","min-w-[60px]",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5","viewBox","0 0 20 20","fill","currentColor",4,"ngIf"],["class","w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin",4,"ngIf"],[1,"text-xs","text-[#778da9ff]","mt-2","text-right"],[1,"text-center","py-12"],[1,"w-20","h-20","bg-[#415a77ff]","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-10","w-10","text-[#e0e1ddff]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"],[1,"text-2xl","font-bold","text-[#e0e1ddff]","mb-2"],[1,"text-[#778da9ff]","max-w-md","mx-auto"],[1,"mt-6","flex","flex-wrap","justify-center","gap-2"],["class","bg-[#1b263bff] hover:bg-[#415a77ff] text-[#e0e1ddff] px-4 py-2 rounded-full text-sm transition-colors border border-[#415a77ff]",3,"click",4,"ngFor","ngForOf"],[1,"bg-[#1b263bff]","hover:bg-[#415a77ff]","text-[#e0e1ddff]","px-4","py-2","rounded-full","text-sm","transition-colors","border","border-[#415a77ff]",3,"click"],[1,"message-container"],["class","flex justify-end mb-4",4,"ngIf"],["class","flex justify-start mb-4",4,"ngIf"],[1,"flex","justify-end","mb-4"],[1,"max-w-xs","lg:max-w-md"],[1,"bg-[#415a77ff]","text-[#e0e1ddff]","rounded-2xl","rounded-br-md","px-4","py-3","shadow-lg"],[1,"whitespace-pre-wrap"],[1,"text-xs","text-[#778da9ff]","mt-1","text-right"],[1,"w-8","h-8","bg-[#778da9ff]","rounded-full","flex","items-center","justify-center","ml-3","flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-[#e0e1ddff]"],["fill-rule","evenodd","d","M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule","evenodd"],[1,"flex","justify-start","mb-4"],[1,"w-8","h-8","bg-[#415a77ff]","rounded-full","flex","items-center","justify-center","mr-3","flex-shrink-0"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-[#e0e1ddff]"],[1,"bg-[#1b263bff]","text-[#e0e1ddff]","rounded-2xl","rounded-bl-md","px-4","py-3","shadow-lg","border","border-[#415a77ff]"],["class","flex space-x-1",4,"ngIf"],["class","whitespace-pre-wrap",4,"ngIf"],["class","text-xs text-[#778da9ff] mt-1",4,"ngIf"],[1,"flex","space-x-1"],[1,"typing-dot"],[1,"typing-dot",2,"animation-delay","0.2s"],[1,"typing-dot",2,"animation-delay","0.4s"],[1,"text-xs","text-[#778da9ff]","mt-1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["d","M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"],[1,"w-5","h-5","border-2","border-white","border-t-transparent","rounded-full","animate-spin"]],template:function(o,r){if(o&1){let s=w();i(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),g(),i(6,"svg",8),c(7,"path",9),n()(),v(),i(8,"div")(9,"h1",10),m(10,"Nutrition AI Assistant"),n(),i(11,"p",11),c(12,"span",12),m(13," Online - Under Development \u2013 UI Preview Only "),n()()(),i(14,"button",13),x("click",function(){return u(s),p(r.clearChat())}),m(15," Clear Chat "),n()()()(),i(16,"div",14)(17,"div",15,0)(19,"div",4),h(20,q,10,1,"div",16)(21,X,3,2,"div",17),n()()(),i(22,"div",18)(23,"div",4)(24,"form",19),x("ngSubmit",function(){return u(s),p(r.sendMessage())}),i(25,"div",20)(26,"textarea",21,1),x("keydown",function(U){return u(s),p(r.onKeyDown(U))}),n(),i(28,"button",22),x("click",function(){return u(s),p(r.toggleEmojiPicker())}),m(29," \u{1F60A} "),n()(),i(30,"button",23),h(31,Z,2,0,"svg",24)(32,ee,1,0,"div",25),n()(),i(33,"div",26),m(34),n()()()()}if(o&2){let s;a(20),l("ngIf",r.messages.length===0),a(),l("ngForOf",r.messages)("ngForTrackBy",r.trackByMessageId),a(3),l("formGroup",r.messageForm),a(6),l("disabled",r.messageForm.invalid||r.isTyping),a(),l("ngIf",!r.isTyping),a(),l("ngIf",r.isTyping),a(2),y(" ",((s=r.messageForm.get("message"))==null||s.value==null?null:s.value.length)||0,"/500 ")}},dependencies:[V,N,F,P,W,B,O,D,j,H],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1b263b}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#415a77;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#778da9}.typing-dot[_ngcontent-%COMP%]{width:8px;height:8px;background-color:#778da9;border-radius:50%;animation:_ngcontent-%COMP%_typing 1.4s infinite ease-in-out}@keyframes _ngcontent-%COMP%_typing{0%,80%,to{transform:scale(0);opacity:.5}40%{transform:scale(1);opacity:1}}.message-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}textarea[_ngcontent-%COMP%]{field-sizing:content}"]})}}return t})();export{ae as ChatWithNutritionAiComponent};
