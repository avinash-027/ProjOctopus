import{a as M}from"./chunk-4EJSCFOK.js";import{a as K,b as p,c as O,d as A,e as D,f as k,g as L,h as V,i as q,j,k as G,l as R,m as $}from"./chunk-YPKE7PS4.js";import{$a as g,Da as N,Ha as s,M as b,Oa as a,Qa as n,R as S,Ra as i,Sa as u,Ta as I,Ua as x,Va as f,Y as E,Z as y,_a as r,a as _,ab as c,b as C,tb as w,ua as o,ub as T,vb as F,wb as H,ya as v}from"./chunk-OVXWXYHI.js";var P=(()=>{class t{constructor(e){this.http=e,this.apiUrl="http://localhost:5247/api/GeminiNutrientTracker/generate-nutrition-report"}generateNutritionReport(e){let m={Text:e.text,WeightKg:e.weightKg,HeightCm:e.heightCm,Age:e.age,Gender:e.gender,HealthConditions:e.healthConditions};return this.http.post(this.apiUrl,m)}static{this.\u0275fac=function(m){return new(m||t)(S(M))}}static{this.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function U(t,d){t&1&&(n(0,"div",31),r(1," Please describe your meal "),i())}function Y(t,d){t&1&&(n(0,"span"),r(1,"Weight is required"),i())}function B(t,d){t&1&&(n(0,"span"),r(1," Weight must be between 20 and 300 kg "),i())}function J(t,d){if(t&1&&(n(0,"div",31),s(1,Y,2,0,"span",32)(2,B,2,0,"span",32),i()),t&2){let e=f();o(),a("ngIf",e.f.weightKg.errors==null?null:e.f.weightKg.errors.required),o(),a("ngIf",(e.f.weightKg.errors==null?null:e.f.weightKg.errors.min)||(e.f.weightKg.errors==null?null:e.f.weightKg.errors.max))}}function Q(t,d){t&1&&(n(0,"span"),r(1,"Height is required"),i())}function X(t,d){t&1&&(n(0,"span"),r(1," Height must be between 100 and 250 cm "),i())}function Z(t,d){if(t&1&&(n(0,"div",31),s(1,Q,2,0,"span",32)(2,X,2,0,"span",32),i()),t&2){let e=f();o(),a("ngIf",e.f.heightCm.errors==null?null:e.f.heightCm.errors.required),o(),a("ngIf",(e.f.heightCm.errors==null?null:e.f.heightCm.errors.min)||(e.f.heightCm.errors==null?null:e.f.heightCm.errors.max))}}function ee(t,d){t&1&&(n(0,"span"),r(1,"Age is required"),i())}function te(t,d){t&1&&(n(0,"span"),r(1," Age must be between 1 and 120 years "),i())}function ie(t,d){if(t&1&&(n(0,"div",31),s(1,ee,2,0,"span",32)(2,te,2,0,"span",32),i()),t&2){let e=f();o(),a("ngIf",e.f.age.errors==null?null:e.f.age.errors.required),o(),a("ngIf",(e.f.age.errors==null?null:e.f.age.errors.min)||(e.f.age.errors==null?null:e.f.age.errors.max))}}function ne(t,d){t&1&&(n(0,"div",31),r(1," Please select a gender "),i())}function re(t,d){if(t&1){let e=I();n(0,"div",33)(1,"input",34),x("change",function(l){E(e);let h=f();return y(h.onHealthConditionChange(l))}),i(),n(2,"label",35),r(3),i()()}if(t&2){let e=d.$implicit;o(),a("id",e)("value",e),o(),a("for",e),o(),g(e)}}function oe(t,d){t&1&&u(0,"span",36)}function ae(t,d){if(t&1&&(n(0,"div",51)(1,"p",46),r(2," Vitamins: "),n(3,"span",53),r(4),i()()()),t&2){let e=f().$implicit;o(4),g(e.vitamins)}}function le(t,d){if(t&1&&(n(0,"div",51)(1,"p",46),r(2," Minerals: "),n(3,"span",53),r(4),i()()()),t&2){let e=f().$implicit;o(4),g(e.minerals)}}function de(t,d){if(t&1&&(n(0,"li"),r(1),i()),t&2){let e=d.$implicit;o(),c(" ",e," ")}}function me(t,d){if(t&1&&(n(0,"div",51)(1,"p",46),r(2,"Suggestions:"),i(),n(3,"ul",54),s(4,de,2,1,"li",55),i()()),t&2){let e=f().$implicit;o(4),a("ngForOf",e.suggestions)}}function se(t,d){if(t&1&&(n(0,"div",43)(1,"div",44)(2,"h4",45),r(3),i(),n(4,"span",46),r(5),i()(),n(6,"div",47)(7,"div",48)(8,"p",46),r(9,"Calories"),i(),n(10,"p",49),r(11),i()(),n(12,"div",48)(13,"p",46),r(14,"Protein"),i(),n(15,"p",49),r(16),i()(),n(17,"div",48)(18,"p",46),r(19,"Carbs"),i(),n(20,"p",49),r(21),i()(),n(22,"div",48)(23,"p",46),r(24,"Fats"),i(),n(25,"p",49),r(26),i()()(),s(27,ae,5,1,"div",50)(28,le,5,1,"div",50),n(29,"div",51)(30,"p",46),r(31," Can Consume: "),n(32,"span",52),r(33),i()()(),n(34,"div",51)(35,"p",46),r(36," Reason: "),n(37,"span",53),r(38),i()()(),s(39,me,5,1,"div",50),i()),t&2){let e=d.$implicit;o(3),c(" ",e.foodName," "),o(2),g(e.servingSize),o(6),c(" ",e.calories," "),o(5),c(" ",e.protein_g,"g "),o(5),c(" ",e.carbs_g,"g "),o(5),c(" ",e.fats_g,"g "),o(),a("ngIf",e.vitamins),o(),a("ngIf",e.minerals),o(4),a("ngClass",e.canConsume?"text-green-400":"text-red-400"),o(),c(" ",e.canConsume?"Yes":"No"," "),o(5),g(e.reason),o(),a("ngIf",e.suggestions==null?null:e.suggestions.length)}}function pe(t,d){if(t&1&&(n(0,"div",37)(1,"h2",38),r(2," Nutrition Report "),i(),n(3,"div",39)(4,"h3",40),r(5,"Food Items"),i(),n(6,"div",41),s(7,se,40,12,"div",42),i()()()),t&2){let e=f();o(7),a("ngForOf",e.report.foodItems)}}function fe(t,d){if(t&1&&(n(0,"div",56),r(1),i()),t&2){let e=f();o(),c(" ",e.errorMessage," ")}}var xe=(()=>{class t{constructor(e,m){this.fb=e,this.nutritionService=m,this.submitted=!1,this.isLoading=!1,this.report=null,this.errorMessage="",this.selectedHealthConditions=[],this.healthConditionsList=["Diabetes","Hypertension","High Cholesterol","Obesity","Heart Disease","Kidney Disease","Celiac Disease","Lactose Intolerance"],this.nutritionForm=this.fb.group({text:["",p.required],weightKg:["",[p.required,p.min(20),p.max(300)]],heightCm:["",[p.required,p.min(100),p.max(250)]],age:["",[p.required,p.min(1),p.max(120)]],gender:["",p.required]})}get f(){return this.nutritionForm.controls}onHealthConditionChange(e){let m=e.target,l=m.value;m.checked?this.selectedHealthConditions.push(l):this.selectedHealthConditions=this.selectedHealthConditions.filter(h=>h!==l)}onSubmit(){if(this.submitted=!0,this.errorMessage="",this.nutritionForm.invalid)return;this.isLoading=!0,this.report=null;let e=C(_({},this.nutritionForm.value),{healthConditions:this.selectedHealthConditions||[]});this.nutritionService.generateNutritionReport(e).subscribe({next:m=>{this.isLoading=!1,this.report=m,setTimeout(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},100)},error:m=>{this.isLoading=!1,this.errorMessage="Failed to analyze nutrition data. Please try again later.",console.error("API error:",m)}})}static{this.\u0275fac=function(m){return new(m||t)(v(R),v(P))}}static{this.\u0275cmp=N({type:t,selectors:[["app-chat-nutrition"]],decls:54,vars:12,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"max-w-4xl","mx-auto"],[1,"text-3xl","font-bold","text-[#e0e1ddff]","mb-8"],[1,"card","mb-8"],[1,"text-xl","font-semibold","text-[#e0e1ddff]","mb-4"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"form-group"],["for","text",1,"form-label"],["id","text","formControlName","text","rows","4","placeholder","Describe your meal in detail (e.g., 2 eggs, 2 slices of whole wheat toast with butter, and a cup of coffee with milk)",1,"input-field"],["class","form-error",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","weightKg",1,"form-label"],["type","number","id","weightKg","formControlName","weightKg",1,"input-field"],["for","heightCm",1,"form-label"],["type","number","id","heightCm","formControlName","heightCm",1,"input-field"],["for","age",1,"form-label"],["type","number","id","age","formControlName","age",1,"input-field"],["for","gender",1,"form-label"],["id","gender","formControlName","gender",1,"input-field"],["value",""],["value","Male"],["value","Female"],["value","Other"],[1,"form-label"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-3","mt-2"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"flex","justify-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","inline-block w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2",4,"ngIf"],["class","card slide-in-up",4,"ngIf"],["class","bg-red-900 text-red-100 p-4 rounded-md mt-4",4,"ngIf"],[1,"form-error"],[4,"ngIf"],[1,"flex","items-center"],["type","checkbox",1,"mr-2","h-4","w-4","text-[#415a77ff]",3,"change","id","value"],[1,"text-[#e0e1ddff]",3,"for"],[1,"inline-block","w-5","h-5","border-2","border-white","border-t-transparent","rounded-full","animate-spin","mr-2"],[1,"card","slide-in-up"],[1,"text-xl","font-semibold","text-[#e0e1ddff]","mb-6"],[1,"space-y-6"],[1,"text-lg","font-semibold","text-[#778da9ff]"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","nutrition-item p-4 bg-[#0d1b2aff] rounded-md border border-[#415a77ff]",4,"ngFor","ngForOf"],[1,"nutrition-item","p-4","bg-[#0d1b2aff]","rounded-md","border","border-[#415a77ff]"],[1,"flex","flex-col","md:flex-row","md:items-center","justify-between","gap-3","mb-2"],[1,"text-lg","font-medium","text-[#e0e1ddff]"],[1,"text-sm","text-[#778da9ff]"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-3","mb-3"],[1,"text-center","p-2","rounded-md"],[1,"text-lg","font-semibold","text-[#e0e1ddff]"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[3,"ngClass"],[1,"text-[#e0e1ddff]"],[1,"list-disc","list-inside","text-[#e0e1ddff]"],[4,"ngFor","ngForOf"],[1,"bg-red-900","text-red-100","p-4","rounded-md","mt-4"]],template:function(m,l){m&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),r(3," Nutrition Analysis "),i(),n(4,"div",3)(5,"h2",4),r(6," Describe Your Meal "),i(),n(7,"form",5),x("ngSubmit",function(){return l.onSubmit()}),n(8,"div",6)(9,"label",7),r(10,"Meal Description"),i(),u(11,"textarea",8),s(12,U,2,0,"div",9),i(),n(13,"div",10)(14,"div",6)(15,"label",11),r(16,"Weight (kg)"),i(),u(17,"input",12),s(18,J,3,2,"div",9),i(),n(19,"div",6)(20,"label",13),r(21,"Height (cm)"),i(),u(22,"input",14),s(23,Z,3,2,"div",9),i()(),n(24,"div",10)(25,"div",6)(26,"label",15),r(27,"Age"),i(),u(28,"input",16),s(29,ie,3,2,"div",9),i(),n(30,"div",6)(31,"label",17),r(32,"Gender"),i(),n(33,"select",18)(34,"option",19),r(35,"Select gender"),i(),n(36,"option",20),r(37,"Male"),i(),n(38,"option",21),r(39,"Female"),i(),n(40,"option",22),r(41,"Other"),i()(),s(42,ne,2,0,"div",9),i()(),n(43,"div",6)(44,"label",23),r(45,"Health Conditions"),i(),n(46,"div",24),s(47,re,4,4,"div",25),i()(),n(48,"div",26)(49,"button",27),s(50,oe,1,0,"span",28),r(51),i()()()(),s(52,pe,8,1,"div",29)(53,fe,2,1,"div",30),i()()),m&2&&(o(7),a("formGroup",l.nutritionForm),o(5),a("ngIf",l.submitted&&l.f.text.errors),o(6),a("ngIf",l.submitted&&l.f.weightKg.errors),o(5),a("ngIf",l.submitted&&l.f.heightCm.errors),o(6),a("ngIf",l.submitted&&l.f.age.errors),o(13),a("ngIf",l.submitted&&l.f.gender.errors),o(5),a("ngForOf",l.healthConditionsList),o(2),a("disabled",l.isLoading),o(),a("ngIf",l.isLoading),o(),c(" ",l.isLoading?"Analyzing...":"Analyze Nutrition"," "),o(),a("ngIf",l.report),o(),a("ngIf",l.errorMessage))},dependencies:[H,w,T,F,$,D,j,G,K,k,q,O,A,L,V],encapsulation:2})}}return t})();export{xe as ChatNutritionComponent};
