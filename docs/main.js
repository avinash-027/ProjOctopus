import{a as w,c as T,d as I,e as M,f as N,g as E,h as _,i as R,j as i}from"./chunk-75IKCH4B.js";import{b as y,c as L}from"./chunk-4EJSCFOK.js";import{Da as l,H as k,Ha as x,Oa as b,Qa as n,Ra as r,S as c,Sa as A,Ua as g,_a as p,m as v,vb as S,wb as f,x as C,ya as s}from"./chunk-OVXWXYHI.js";var j=(()=>{class t{constructor(e){this.authService=e}logout(){this.authService.logout()}static{this.\u0275fac=function(o){return new(o||t)(s(i))}}static{this.\u0275cmp=l({type:t,selectors:[["app-navbar"]],decls:16,vars:0,consts:[[1,"bg-[#0d1b2aff]","border-b","border-[#415a77ff]","py-4","px-6"],[1,"container","mx-auto","flex","flex-wrap","items-center","justify-between"],[1,"flex","items-center"],["routerLink","/",1,"text-xl","font-bold","text-[#e0e1ddff]"],[1,"flex","items-center","space-x-1","md:space-x-4"],["routerLink","/chat-nutrition","routerLinkActive","active",1,"nav-link"],["routerLink","/chat-with-nutrition-ai","routerLinkActive","active",1,"nav-link"],["routerLink","/photo-analysis","routerLinkActive","active",1,"nav-link"],["routerLink","/meal-planner","routerLinkActive","active",1,"nav-link"],[1,"btn","btn-outline","ml-4",3,"click"]],template:function(o,m){o&1&&(n(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),p(4,"NutrientTracker"),r()(),n(5,"div",4)(6,"a",5),p(7,"Nutrition Analysis"),r(),n(8,"a",6),p(9,"Nutrition AI Chat"),r(),n(10,"a",7),p(11,"Photo Analysis"),r(),n(12,"a",8),p(13,"Meal Planner"),r(),n(14,"button",9),g("click",function(){return m.logout()}),p(15,"Logout"),r()()()())},dependencies:[f,R,M,N],encapsulation:2})}}return t})();function $(t,a){t&1&&A(0,"app-navbar")}var P=(()=>{class t{constructor(e){this.authService=e}static{this.\u0275fac=function(o){return new(o||t)(s(i))}}static{this.\u0275cmp=l({type:t,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"],[1,"min-h-screen"]],template:function(o,m){o&1&&(x(0,$,1,0,"app-navbar",0),n(1,"main",1),A(2,"router-outlet"),r()),o&2&&b("ngIf",m.authService.isAuthenticated())},dependencies:[T,j,f,S],encapsulation:2})}}return t})();var u=()=>{let t=c(i),a=c(I);return t.isAuthenticated()?!0:(a.navigate([""],{queryParams:{requiresLogin:"true"}}),!1)};var D=[{path:"",loadComponent:()=>import("./chunk-WJBZ4E3C.js").then(t=>t.HomeComponent)},{path:"chat-nutrition",loadComponent:()=>import("./chunk-5DGTXUUM.js").then(t=>t.ChatNutritionComponent),canActivate:[u]},{path:"chat-with-nutrition-ai",loadComponent:()=>import("./chunk-YBREXT5B.js").then(t=>t.ChatWithNutritionAiComponent),canActivate:[u]},{path:"photo-analysis",loadComponent:()=>import("./chunk-7XPE3X6A.js").then(t=>t.PhotoAnalysisComponent),canActivate:[u]},{path:"meal-planner",loadComponent:()=>import("./chunk-DP6KXMYP.js").then(t=>t.MealPlannerComponent),canActivate:[u]},{path:"**",redirectTo:""}];var B=(t,a)=>{let e=c(i);if(t.url.includes("/api/Auth/"))return a(t);let o=e.getToken();if(o){let m=t.clone({headers:t.headers.set("Authorization",`Bearer ${o}`)});return a(m).pipe(C(h=>h.status===401?e.refreshToken().pipe(k(()=>{let d=e.getToken(),F=t.clone({headers:t.headers.set("Authorization",`Bearer ${d}`)});return a(F)}),C(d=>(e.logout(),v(()=>d)))):v(()=>h)))}return a(t)};var z={providers:[E(D,_()),y(L([B]))]};w(P,z).catch(t=>console.error(t));
